10 SCREEN 1
20 DIM B(9)
30 FOR I=0 TO 8:B(I)=0
40 CP=1:W=0

50 INPUT "SELECT AI (1/2)";AI
60 IF AI<>1 AND AI<>2 THEN GOTO 50

60 GOSUB 200

100 LOCATE 0, 8:PRINT "PLAYER ";CP;
105 IF CP=AI THEN GOSUB 1000 ELSE INPUT "MOVE";A
110 IF B(A)<>0 THEN PRINT "INVALID MOVE ";A;"!":PRINT"VALID MOVES:";:GOSUB 400:GOTO 100
120 B(A)=CP
130 GOSUB 200
140 GOSUB 300
150 IF W<>0 THEN IF W=-1 THEN PRINT "DRAW!" ELSE PRINT "WINNER ";W:END
160 IF CP=1 THEN CP=2 ELSE CP=1
190 GOTO 100

200 CLS
210 FOR I=0 TO 8
220  LOCATE (I MOD 3)*2, (I\3)*2
230  IF B(I)=1 THEN PRINT "O" ELSE IF B(I)=2 THEN PRINT "X" ELSE PRINT "-"
240 NEXT I
250 RETURN

300 ' WIN CONDITION
305 W=-1
310 FOR I=0 TO 6 STEP 3
320  IF B(I)=B(I+1) AND B(I+1)=B(I+2) THEN W=B(I):RETURN
330 NEXT I
340 FOR I=0 TO 2
350  IF B(I)=B(I+3) AND B(I+3)=B(I+6) THEN W=B(I):RETURN
360 NEXT I
370 IF B(0)=B(4) AND B(4)=B(8) THEN W=B(0):RETURN
380 IF B(2)=B(4) AND B(4)=B(6) THEN W=B(0):RETURN
390 FOR I=0 TO 8
391  IF B(I)=0 THEN W=0
392 NEXT I
399 RETURN

400 'ITERATE OVER THE VALID MOVES
410 FOR I=0 TO 8
420  IF B(I)=0 THEN GOSUB 500
430 NEXT I
440 RETURN

500 PRINT I;" ";
599 RETURN

1000 ' AI PLAYS, INVOKE SUBROUTINE for move selection MS, PERFORM MOVE
1010 GOSUB 1100
1020 A=MS
1030 RETURN

1100 ' SIMPLE AI, first empty epace
1110 FOR I=0 TO 8
1120  IF B(I)=0 THEN MS=I: RETURN
1130 NEXT I 
1140 RETURN
